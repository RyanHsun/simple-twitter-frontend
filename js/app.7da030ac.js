(function(e){function t(t){for(var s,a,o=t[0],c=t[1],u=t[2],l=0,d=[];l<o.length;l++)a=o[l],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&d.push(r[a][0]),r[a]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);f&&f(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],s=!0,a=1;a<n.length;a++){var o=n[a];0!==r[o]&&(s=!1)}s&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var s={},a={app:0},r={app:0},i=[];function o(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-1fdd5363":"a435f9b6","chunk-212df2fb":"36f28ec3","chunk-3010eec0":"30a36ad9","chunk-3ac5838a":"f41cd16f","chunk-4152cb0c":"a246f110","chunk-54b9b808":"e337f1fd","chunk-5d96f781":"c11ab8f1","chunk-76ee6dff":"b60b29f1","chunk-7d8fe7f6":"1580c3b9","chunk-a2605440":"6b0d4900","chunk-f12e0a62":"c74d7093"}[e]+".js"}function c(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-1fdd5363":1,"chunk-212df2fb":1,"chunk-3010eec0":1,"chunk-3ac5838a":1,"chunk-4152cb0c":1,"chunk-54b9b808":1,"chunk-5d96f781":1,"chunk-76ee6dff":1,"chunk-7d8fe7f6":1,"chunk-a2605440":1,"chunk-f12e0a62":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var s="css/"+({}[e]||e)+"."+{"chunk-1fdd5363":"6d36541a","chunk-212df2fb":"3b52d6cb","chunk-3010eec0":"a7cd8116","chunk-3ac5838a":"0be0b0ef","chunk-4152cb0c":"9ea2a732","chunk-54b9b808":"518732a2","chunk-5d96f781":"aaf69acb","chunk-76ee6dff":"57c409ff","chunk-7d8fe7f6":"d91e96b9","chunk-a2605440":"a002e4bf","chunk-f12e0a62":"1c01269d"}[e]+".css",r=c.p+s,i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var u=i[o],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===s||l===r))return t()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){u=d[o],l=u.getAttribute("data-href");if(l===s||l===r)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var s=t&&t.target&&t.target.src||r,i=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=s,delete a[e],f.parentNode.removeChild(f),n(i)},f.href=r;var m=document.getElementsByTagName("head")[0];m.appendChild(f)})).then((function(){a[e]=0})));var s=r[e];if(0!==s)if(s)t.push(s[2]);else{var i=new Promise((function(t,n){s=r[e]=[t,n]}));t.push(s[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=o(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=r[e];if(0!==n){if(n){var s=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+s+": "+a+")",d.name="ChunkLoadError",d.type=s,d.request=a,n[1](d)}r[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=s,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)c.d(n,s,function(t){return e[t]}.bind(null,s));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/simple-twitter-frontend/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var f=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"0881":function(e,t,n){e.exports=n.p+"img/icon_user.b3ff190e.svg"},"0f3a":function(e,t,n){},1094:function(e,t,n){},1912:function(e,t,n){e.exports=n.p+"img/icon_cog.2b17014d.svg"},"1ae4":function(e,t,n){e.exports=n.p+"img/logo.50698f41.svg"},2375:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"spinner"},[n("div",{staticClass:"bouncing-loader"},[n("div"),n("div"),n("div")])])}],r=(n("41d0"),n("2877")),i={},o=Object(r["a"])(i,s,a,!1,null,"3cd66448",null);t["a"]=o.exports},"238d":function(e,t,n){"use strict";n("d380")},"25b3":function(e,t,n){},2708:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var s=n("c1df"),a=n.n(s),r={filters:{fromNow:function(e){a.a.locale("zh-tw");var t=a()(e).fromNow(),n=t.substring(t.length,2),s=parseInt(t);return"天前"===n&&s>=2?e?a()(e).format("YYYY年M月D日"):"-":e?a()(e).fromNow():"-"}}},i={filters:{exactDate:function(e){return a.a.locale("zh-tw"),e?a()(e).format("a hh:mm ⋅ YYYY年M月D日"):"-"}}},o={filters:{emptyImage:function(e){return e||"https://via.placeholder.com/350x220/DFDFDF?text=No+Image"}}}},2765:function(e,t,n){e.exports=n.p+"img/icon_comment.17ee81ba.svg"},"2fa3":function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));n("d3b7");var s=n("bc3a"),a=n.n(s),r=n("3d20"),i=n.n(r),o="https://twitter-project-2021.herokuapp.com/api",c=a.a.create({baseURL:o});c.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers["Authorization"]="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)}));var u=c,l=i.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3})},"3e72":function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"users-top"},[n("div",{staticClass:"wrap"},[n("h2",{staticClass:"title"},[e._v("跟隨誰")]),n("ul",{staticClass:"users",class:{nomore:!e.showMore}},[e.isLoading?n("Spinner"):e._l(e.users,(function(t){return n("li",{key:t.id,staticClass:"user"},[n("router-link",{staticClass:"avatar",attrs:{to:{name:"user",params:{id:t.id}}}},[n("img",{attrs:{src:e._f("emptyImage")(t.avatar),alt:""}})]),n("router-link",{staticClass:"info",attrs:{to:{name:"user",params:{id:t.id}}}},[n("span",{staticClass:"name"},[e._v(e._s(t.name))]),n("span",{staticClass:"account"},[e._v("@"+e._s(t.account))])]),t.isFollowing?n("button",{staticClass:"btn toggle-follow is-following",attrs:{disabled:e.isProcessing},on:{click:function(n){return n.stopPropagation(),n.preventDefault(),e.deleteFollowing(t.id)}}},[e._v(" 正在跟隨 ")]):n("button",{staticClass:"btn toggle-follow",attrs:{disabled:e.isProcessing},on:{click:function(n){return n.stopPropagation(),n.preventDefault(),e.addFollowing(t.id)}}},[e._v(" 跟隨 ")])],1)}))],2),n("button",{staticClass:"show-more-user",class:{nomore:!e.showMore},attrs:{disabled:!e.showMore},on:{click:e.showMoreUser}},[e._v(" 顯示更多 ")])])])},a=[],r=n("2909"),i=n("1da1"),o=n("5530"),c=(n("d81d"),n("96cf"),n("2f62")),u=n("2708"),l=n("2375"),d=n("4cce"),f=n("2fa3"),m={mixins:[u["a"]],components:{Spinner:l["a"]},data:function(){return{users:[],isLoading:!0,isProcessing:!1,showMore:!0}},computed:Object(o["a"])({},Object(c["b"])(["currentUser"])),created:function(){var e=this.$route.query,t=e.offset,n=void 0===t?0:t,s=e.limit,a=void 0===s?5:s;this.fetchTopUsers({queryOffset:n,queryLimit:a})},methods:{fetchTopUsers:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s,a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.queryOffset,a=e.queryLimit,n.prev=1,n.next=4,d["a"].getTopUsers({offset:s,limit:a});case 4:if(i=n.sent,t.users=Object(r["a"])(i.data),"error"!==i.data.status){n.next=8;break}throw new Error(i.data.message);case 8:t.isLoading=!1,n.next=16;break;case 11:n.prev=11,n.t0=n["catch"](1),t.isLoading=!1,t.isProcessing=!1,f["a"].fire({icon:"error",title:"無法更新個人資料，請稍後再試"});case 16:case"end":return n.stop()}}),n,null,[[1,11]])})))()},addFollowing:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.isProcessing=!0,n.next=4,d["a"].addFollowing({id:e});case 4:if(s=n.sent,a=s.data,"error"!==a.status){n.next=8;break}throw new Error(a.message);case 8:t.users=t.users.map((function(t){return t.id!==e?t:Object(o["a"])(Object(o["a"])({},t),{},{isFollowing:!0})})),t.$emit("after-add-follow"),t.postTimeline(e,4,t.currentUser.id),f["a"].fire({icon:"success",title:"跟隨成功"}),t.isProcessing=!1,n.next=20;break;case 15:n.prev=15,n.t0=n["catch"](0),console.log(n.t0),f["a"].fire({icon:"error",title:"無法新增跟隨，請稍後再試"}),t.isProcessing=!1;case 20:case"end":return n.stop()}}),n,null,[[0,15]])})))()},deleteFollowing:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.isProcessing=!0,n.next=4,d["a"].deleteFollowing({userId:e});case 4:if(s=n.sent,a=s.data,"error"!==a.status){n.next=8;break}throw new Error(a.message);case 8:t.users=t.users.map((function(t){return t.id!==e?t:Object(o["a"])(Object(o["a"])({},t),{},{isFollowing:!1})})),t.$emit("after-delete-follow"),f["a"].fire({icon:"success",title:"取消跟隨"}),t.isProcessing=!1,n.next=19;break;case 14:n.prev=14,n.t0=n["catch"](0),console.error(n.t0.message),f["a"].fire({icon:"error",title:"無法取消跟隨，請稍後再試"}),t.isProcessing=!1;case 19:case"end":return n.stop()}}),n,null,[[0,14]])})))()},showMoreUser:function(){this.fetchTopUsers(0,10),this.showMore=!1},postTimeline:function(e,t,n){this.$socket.emit("post_timeline",{ReceiverId:e,type:t,PostId:n})}}},p=m,b=(n("238d"),n("2877")),g=Object(b["a"])(p,s,a,!1,null,"1be83632",null);t["a"]=g.exports},"3fa2":function(e,t,n){"use strict";n("0f3a")},"41d0":function(e,t,n){"use strict";n("e37f")},"424c":function(e,t,n){"use strict";n("ebe7")},4678:function(e,t,n){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}a.keys=function(){return Object.keys(s)},a.resolve=r,e.exports=a,a.id="4678"},"4cce":function(e,t,n){"use strict";n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("99af"),n("25f0");var s=n("2fa3");t["a"]={getCurrentUser:function(){return s["b"].get("/users/current_user")},getUser:function(e){var t=e.userId;return s["b"].get("/users/".concat(t))},updateUser:function(e){var t=e.userId,n=e.formData;return s["b"].put("/users/".concat(t),n)},getUserTweets:function(e){var t=e.userId,n=e.offset,a=e.limit,r=new URLSearchParams({offset:n,limit:a});return s["b"].get("/users/".concat(t,"/tweets?").concat(r.toString()))},getUserRepliedTweets:function(e){var t=e.userId,n=e.offset,a=e.limit,r=new URLSearchParams({offset:n,limit:a});return s["b"].get("/users/".concat(t,"/replied_tweets?").concat(r.toString()))},getUserLikes:function(e){var t=e.userId,n=e.offset,a=e.limit,r=new URLSearchParams({offset:n,limit:a});return s["b"].get("/users/".concat(t,"/likes?").concat(r.toString()))},getFollowings:function(e){var t=e.userId,n=e.offset,a=e.limit,r=new URLSearchParams({offset:n,limit:a});return s["b"].get("/users/".concat(t,"/followings?").concat(r.toString()))},getFollowers:function(e){var t=e.userId,n=e.offset,a=e.limit,r=new URLSearchParams({offset:n,limit:a});return s["b"].get("/users/".concat(t,"/followers?").concat(r.toString()))},addFollowing:function(e){var t=e.id;return s["b"].post("/followships",{id:t})},deleteFollowing:function(e){var t=e.userId;return s["b"].delete("/followships/".concat(t))},getTopUsers:function(e){var t=e.offset,n=e.limit,a=new URLSearchParams({offset:t,limit:n});return s["b"].get("/users?".concat(a.toString()))},toggleNotification:function(e){var t=e.id;return s["b"].post("/followships/subscription",{id:t})}}},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],i=(n("4989"),n("ab8b"),{name:"App"}),o=i,c=(n("034f"),n("2877")),u=Object(c["a"])(o,a,r,!1,null,null,null),l=u.exports,d=n("1da1"),f=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("caad"),n("b0c0"),n("2532"),n("8c4f")),m=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},p=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container not-found py-5"},[s("img",{staticClass:"mb-4",attrs:{src:n("9b19"),alt:""}}),s("div",{staticClass:"text-center mb-4"},[s("h1",{staticClass:"h3 mb-3 font-weight-normal"},[e._v(" Aphitter ")]),s("div",{staticClass:"title"},[e._v(" 404 Not Found ")])])])}],b=(n("b56c"),{}),g=Object(c["a"])(b,m,p,!1,null,"37e6a67d",null),w=g.exports,h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container py-5"},[s("form",{staticClass:"w-100",on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.handleSubmit.apply(null,arguments)}}},[s("img",{staticClass:"mb-4",attrs:{src:n("9b19"),alt:""}}),e._m(0),s("div",{staticClass:"form-label-group mb-2"},[s("label",{staticClass:"input-label",attrs:{for:"email"}},[e._v("帳號")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{id:"email",name:"email",type:"email",placeholder:"請輸入註冊的信箱",autocomplete:"username",required:"",autofocus:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),s("div",{staticClass:"form-label-group mb-3"},[s("label",{staticClass:"input-label",attrs:{for:"password"}},[e._v("密碼")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{id:"password",name:"password",type:"password",placeholder:"請輸入密碼",autocomplete:"current-password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),s("button",{staticClass:"btn btn-lg btn-block mb-3",attrs:{disabled:e.isProcessing,type:"submit"}},[e._v(" "+e._s(e.isProcessing?"登入中...":"登入")+" ")]),s("div",{staticClass:"text-right mb-3"},[s("p",[s("router-link",{staticClass:"login-text",attrs:{to:"/regist"}},[e._v("註冊Aphitter")]),e._v(" · "),s("router-link",{staticClass:"login-text",attrs:{to:"/admin/login"}},[e._v("後台登入")])],1)])])])},v=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-center mb-4"},[n("h1",{staticClass:"h3 mb-3 font-weight-normal"},[e._v(" 登入Aphitter ")])])}],k=n("7696"),j=n("2fa3"),_=n("5132"),C=n.n(_),x={data:function(){return{email:"",password:"",isProcessing:!1}},created:function(){},sockets:{connect:function(){console.log("連線成功")},disconnect:function(){console.log("斷開連線")},reconnect:function(){console.log("重新連線")}},methods:{handleSubmit:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.email&&e.password){t.next=4;break}return j["a"].fire({icon:"warning",title:"請填入帳號和密碼"}),t.abrupt("return");case 4:return e.isProcessing=!0,t.next=7,k["a"].logIn({email:e.email,password:e.password});case 7:if(n=t.sent,a=n.data,"success"===a.status){t.next=11;break}throw new Error(a.message);case 11:localStorage.setItem("token",a.token),r=localStorage.getItem("token"),e.$store.commit("setCurrentUser",a.User),e.$router.push("/tweets"),s["a"].use(new C.a({connection:"https://twitter-project-2021.herokuapp.com/",options:{query:{auth:r}},vuex:{}})),t.next=23;break;case 18:t.prev=18,t.t0=t["catch"](0),e.isProcessing=!1,"This user doesn't exist."===t.t0.response.data.message?(e.email="",e.password="",j["a"].fire({icon:"warning",title:"沒有這個帳戶"})):"Password incorrect."===t.t0.response.data.message?(e.password="",j["a"].fire({icon:"warning",title:"密碼有誤"})):j["a"].fire({icon:"warning",title:"請確認您輸入了正確的帳號密碼"}),console.error(t.t0.message);case 23:case"end":return t.stop()}}),t,null,[[0,18]])})))()}}},y=x,T=(n("9a6e"),Object(c["a"])(y,h,v,!1,null,"67873236",null)),P=T.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("Sidebar",{attrs:{"tweets-id":e.tweets.id},on:{"after-submit-tweet":e.afterSubmitTweet}}),n("section",{staticClass:"tweets"},[n("div",{staticClass:"tweets-wrap"},[e._m(0),n("form",{staticClass:"create-tweet",on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[n("div",{staticClass:"create-tweet-wrap"},[n("span",{staticClass:"avatar",attrs:{href:""}},[n("img",{attrs:{src:e._f("emptyImage")(e.currentUser.avatar),alt:""}})]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newTweet,expression:"newTweet"}],staticClass:"tweet-textarea",attrs:{name:"",id:"index-tweet",cols:"30",rows:"2",maxlength:"140",placeholder:"有什麼新鮮事？"},domProps:{value:e.newTweet},on:{input:function(t){t.target.composing||(e.newTweet=t.target.value)}}})]),n("button",{staticClass:"btn tweet-button",attrs:{type:"submit",disabled:e.isProcessing}},[e._v(" "+e._s(e.isProcessing?"推文中...":"推文")+" ")])]),e.isLoading?n("Spinner"):n("ul",{staticClass:"tweets-list"},e._l(e.tweets,(function(e){return n("TweetsList",{key:e.id,attrs:{initinalTweet:e}})})),1)],1)]),n("UsersTop")],1)},O=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h2",{staticClass:"headbar"},[n("div",{staticClass:"title"},[n("div",{staticClass:"main-title"},[e._v("推文")])])])}],S=n("2909"),I=n("5530"),R=(n("a4d3"),n("e01a"),n("2f62")),N=n("2708"),L=n("5ea5"),E=n("3e72"),A=n("7e75"),M=n("2375"),$=n("11c1"),q=n("6783"),z={mixins:[N["a"]],name:"Tweets",components:{Sidebar:L["a"],TweetsList:A["a"],UsersTop:E["a"],Spinner:M["a"]},data:function(){return{user:{},tweets:[],newTweet:"",isProcessing:!1,isLoading:!0}},computed:Object(I["a"])({},Object(R["b"])(["currentUser"])),created:function(){var e=this.$route.query,t=e.offset,n=void 0===t?0:t,s=e.limit,a=void 0===s?100:s;this.fetchTweets({queryOffset:n,queryLimit:a})},beforeRouteUpdate:function(e,t,n){var s=e.query,a=s.offset,r=void 0===a?"":a,i=s.limit,o=void 0===i?"":i;this.fetchTweets({queryOffset:r,queryLimit:o}),n()},watch:{newTweet:function(e){140===e.length&&j["a"].fire({icon:"warning",title:"字數限制140字"})}},methods:{fetchTweets:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function n(){var s,a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.queryOffset,a=e.queryLimit,n.prev=1,n.next=4,q["a"].getTweets({offset:s,limit:a});case 4:r=n.sent,t.tweets=Object(S["a"])(r.data),t.isLoading=!1,n.next=14;break;case 9:n.prev=9,n.t0=n["catch"](1),t.isLoading=!1,console.log("error",n.t0),j["a"].fire({icon:"error",title:"無法取得推文資料，請稍後再試"});case 14:case"end":return n.stop()}}),n,null,[[1,9]])})))()},handleSubmit:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.newTweet){t.next=4;break}return j["a"].fire({icon:"warning",title:"您的推文未填寫任何內容"}),t.abrupt("return");case 4:return e.isProcessing=!0,t.next=7,q["a"].createTweet({description:e.newTweet});case 7:if(n=t.sent,s=n.data,"error"!==s.status){t.next=11;break}throw new Error(s.message);case 11:e.postTimeline(s.Tweet.id),j["a"].fire({icon:"success",title:"新增推文成功"}),e.isProcessing=!1,e.newTweet="",e.fetchTweets({queryOffset:0,queryLimit:100}),t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](0),console.log(t.t0),j["a"].fire({icon:"warning",title:"無法新增推文，請稍候在試"});case 22:case"end":return t.stop()}}),t,null,[[0,18]])})))()},afterSubmitTweet:function(e){var t=e.description;this.tweets.unshift({id:Object($["v4"])(),description:t,createdAt:new Date,likeNum:0,replyNum:0,Author:{id:this.user.id,account:this.user.account,name:this.user.name,avatar:this.user.avatar}}),this.fetchTweets({queryOffset:0,queryLimit:100})},postTimeline:function(e){var t=null,n=1;this.$socket.emit("post_timeline",{ReceiverId:t,type:n,PostId:e})}}},D=z,F=(n("94f1"),Object(c["a"])(D,U,O,!1,null,"58ae3274",null)),Y=F.exports,B=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container py-5"},[s("form",{staticClass:"w-100",on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.handleSubmit.apply(null,arguments)}}},[s("img",{staticClass:"mb-4",attrs:{src:n("9b19"),alt:""}}),e._m(0),s("div",{staticClass:"form-label-group mb-2"},[s("label",{staticClass:"input-label",attrs:{for:"email"}},[e._v("帳號")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{id:"email",name:"email",type:"email",placeholder:"",autocomplete:"username",required:"",autofocus:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),s("div",{staticClass:"form-label-group mb-3"},[s("label",{staticClass:"input-label",attrs:{for:"password"}},[e._v("密碼")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{id:"password",name:"password",type:"password",placeholder:"",autocomplete:"current-password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),s("button",{staticClass:"btn btn-lg btn-block mb-3",attrs:{type:"submit",disabled:e.isProcessing}},[e._v(" "+e._s(e.isProcessing?"登入中...":"登入")+" ")]),s("div",{staticClass:"text-right mb-3"},[s("p",[s("router-link",{staticClass:"login-text",attrs:{to:"/login"}},[e._v("前台登入")])],1)])])])},J=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-center mb-4"},[n("h1",{staticClass:"h3 mb-3 font-weight-normal"},[e._v("後台登入")])])}],H=n("be6c"),K={data:function(){return{email:"",password:"",isProcessing:!1}},methods:{handleSubmit:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.email&&e.password){t.next=4;break}return j["a"].fire({icon:"warning",title:"請填入 email 和 password"}),t.abrupt("return");case 4:return e.isProcessing=!0,t.next=7,H["a"].adminLogin({email:e.email,password:e.password});case 7:if(n=t.sent,s=n.data,"success"===s.status){t.next=11;break}throw new Error(s.message);case 11:localStorage.setItem("token",s.token),e.$store.commit("setCurrentUser",s.User),e.$router.push("/admin/tweets"),t.next=22;break;case 16:t.prev=16,t.t0=t["catch"](0),console.log("error",t.t0.response.data.message),e.isProcessing=!1,"This admin account doesn't exist."===t.t0.response.data.message?(e.email="",e.password="",j["a"].fire({icon:"warning",title:"沒有這個帳戶"})):"Password incorrect."===t.t0.response.data.message?(e.password="",j["a"].fire({icon:"warning",title:"密碼有誤"})):j["a"].fire({icon:"warning",title:"請確認您輸入了正確的帳號密碼"}),console.error(t.t0.message);case 22:case"end":return t.stop()}}),t,null,[[0,16]])})))()}}},G=K,Q=(n("424c"),Object(c["a"])(G,B,J,!1,null,"2ff27dd0",null)),V=Q.exports,W=n("4cce");s["a"].use(R["a"]);var X=new R["a"].Store({state:{currentUser:{id:-1,account:"",name:"",email:"",avatar:"",role:"user"},isAuthenticated:!1,token:""},mutations:{setCurrentUser:function(e,t){e.currentUser=Object(I["a"])(Object(I["a"])({},e.currentUser),t),e.isAuthenticated=!0,e.token=localStorage.getItem("token")},revokeAuthentication:function(e){e.currentUser={},e.isAuthenticated=!1,e.token="",localStorage.removeItem("token"),sessionStorage.removeItem("rooms"),console.log("[RevokeAuthentication completed]")},setCurrentRoomId:function(e,t){e.currentRoomId=t}},actions:{fetchCurrentUser:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var n,s,a,r,i,o,c,u,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.prev=1,t.next=4,W["a"].getCurrentUser();case 4:if(s=t.sent,a=s.data,"error"!==a.statusText){t.next=8;break}throw new Error(a.message);case 8:return r=a.id,i=a.account,o=a.name,c=a.email,u=a.avatar,l=a.role,n("setCurrentUser",{id:r,account:i,name:o,email:c,avatar:u,role:l}),t.abrupt("return",!0);case 13:return t.prev=13,t.t0=t["catch"](1),console.error(t.t0.message),n("revokeAuthentication"),t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t,null,[[1,13]])})))()}},modules:{}});s["a"].use(f["a"]);var Z=function(e,t,n){var s=X.state.currentUser;s&&"admin"!==s.role?n("/404"):n()},ee=[{path:"/",name:"root",redirect:"/login"},{path:"/login",name:"login",component:P},{path:"/regist",name:"regist",component:function(){return n.e("chunk-4152cb0c").then(n.bind(null,"879c"))}},{path:"/admin",name:"admin-root",redirect:"/admin/login"},{path:"/admin/login",name:"admin-login",component:V},{path:"/users/:id",name:"user",component:function(){return n.e("chunk-212df2fb").then(n.bind(null,"1511"))}},{path:"/users/:id/edit",name:"user-edit",component:function(){return n.e("chunk-212df2fb").then(n.bind(null,"1511"))}},{path:"/users/:id/replied_tweets",name:"user-replied-tweets",component:function(){return n.e("chunk-212df2fb").then(n.bind(null,"1511"))}},{path:"/users/:id/likes",name:"user-likes-tweets",component:function(){return n.e("chunk-212df2fb").then(n.bind(null,"1511"))}},{path:"/users/:id/setting",name:"account-setting",component:function(){return n.e("chunk-a2605440").then(n.bind(null,"99c1"))}},{path:"/users/:id/followers",name:"user-followers",component:function(){return n.e("chunk-76ee6dff").then(n.bind(null,"369c"))}},{path:"/users/:id/followings",name:"user-followings",component:function(){return n.e("chunk-54b9b808").then(n.bind(null,"e85a"))}},{path:"/tweets",name:"tweets",component:Y},{path:"/tweets/:id",name:"tweet",component:function(){return n.e("chunk-3ac5838a").then(n.bind(null,"6f1a"))}},{path:"/admin/users",name:"admin-users",component:function(){return n.e("chunk-5d96f781").then(n.bind(null,"6135"))},beforeEnter:Z},{path:"/admin/tweets",name:"admin-tweets",component:function(){return n.e("chunk-f12e0a62").then(n.bind(null,"fa6a"))},beforeEnter:Z},{path:"/room",name:"room",component:function(){return n.e("chunk-7d8fe7f6").then(n.bind(null,"ffce"))}},{path:"/message/:id",name:"message-await",component:function(){return n.e("chunk-1fdd5363").then(n.bind(null,"e39f"))}},{path:"/message",name:"message",component:function(){return n.e("chunk-1fdd5363").then(n.bind(null,"e39f"))}},{path:"/notification",name:"notification",component:function(){return n.e("chunk-3010eec0").then(n.bind(null,"109a"))}},{path:"*",name:"not-found",component:w}],te=f["a"].prototype.push;f["a"].prototype.push=function(e){return te.call(this,e).catch((function(e){return e}))};var ne=new f["a"]({linkExactActiveClass:"active",routes:ee});ne.beforeEach(function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t,n,s){var a,r,i,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=X.state.currentUser,r=localStorage.getItem("token"),i=X.state.token,o=["login","regist","admin-login"],c=X.state.isAuthenticated,!r||r===i){e.next=9;break}return e.next=8,X.dispatch("fetchCurrentUser");case 8:c=e.sent;case 9:if(c||o.includes(t.name)){e.next=12;break}return s("/login"),e.abrupt("return");case 12:if(!c||!o.includes(t.name)){e.next=15;break}return"user"===a.role?s("/tweets"):"admin"===a.role&&s("/admin/tweets"),e.abrupt("return");case 15:s();case 16:case"end":return e.stop()}}),e)})));return function(t,n,s){return e.apply(this,arguments)}}());var se=ne,ae=localStorage.getItem("token");s["a"].config.productionTip=!1,new s["a"]({router:se,store:X,render:function(e){return e(l)}}).$mount("#app"),ae&&s["a"].use(new C.a({connection:"https://twitter-project-2021.herokuapp.com/",options:{query:{auth:ae}},vuex:{}}))},"5ea5":function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"sidebar"},[s("div",{staticClass:"top"},[s("h1",{staticClass:"logo"},[s("router-link",{attrs:{to:"/tweets"}},[s("img",{attrs:{src:n("1ae4"),alt:""}})])],1),s("nav",{staticClass:"navigation"},[s("router-link",{staticClass:"nav-item index",attrs:{to:"/tweets"}},[s("div",{staticClass:"icon index"},[s("img",{attrs:{src:n("e740"),alt:""}})]),s("div",[e._v("首頁")])]),s("router-link",{staticClass:"nav-item notification",attrs:{to:"/notification"}},[s("div",{staticClass:"icon"},[s("img",{attrs:{src:n("fcfb"),width:"25px",alt:""}}),e.notiUnseenNum>0?s("span",{staticClass:"notice"},[e._v(e._s(e.notiUnseenNum))]):e._e()]),s("div",[e._v("通知")])]),s("router-link",{staticClass:"nav-item public-chat",attrs:{to:"/room"}},[s("div",{staticClass:"icon"},[s("img",{attrs:{src:n("d6b9"),width:"25px",alt:""}})]),s("div",[e._v("公開聊天室")])]),s("router-link",{staticClass:"nav-item private-chat",attrs:{to:"/message"}},[s("div",{staticClass:"icon"},[s("img",{attrs:{src:n("c035"),width:"25px",alt:""}}),e.msgUnseenNum>0?s("span",{staticClass:"notice"},[e._v(e._s(e.msgUnseenNum))]):e._e()]),s("div",[e._v("私人訊息")])]),s("router-link",{staticClass:"nav-item user-profile",attrs:{to:{name:"user",params:{id:e.currentUser.id}}}},[s("div",{staticClass:"icon"},[s("img",{attrs:{src:n("0881"),alt:""}})]),s("div",[e._v("個人資料")])]),s("router-link",{staticClass:"nav-item account-setting",attrs:{to:{name:"account-setting",params:{id:e.currentUser.id}}}},[s("div",{staticClass:"icon"},[s("img",{attrs:{src:n("1912"),alt:""}})]),s("div",[e._v("設定")])])],1),s("button",{staticClass:"btn new-tweet",attrs:{type:"button","data-toggle":"modal","data-target":"#newTweetModal"},on:{click:e.showModal}},[e._v(" 推文 ")]),e.isShowModal?s("div",{staticClass:"modal fade",attrs:{id:"newTweetModal",tabindex:"-1","aria-labelledby":"newTweetModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[e._m(0),s("div",{staticClass:"modal-body"},[s("form",{staticClass:"create-tweet",attrs:{action:""}},[s("div",{staticClass:"create-tweet-wrap"},[s("span",{staticClass:"avatar",attrs:{href:""}},[s("img",{attrs:{src:e._f("emptyImage")(e.currentUser.avatar),alt:""}})]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newTweet,expression:"newTweet"}],staticClass:"tweet-textarea",attrs:{name:"",id:"",cols:"30",rows:"5",maxlength:"140",placeholder:"有什麼新鮮事？"},domProps:{value:e.newTweet},on:{input:function(t){t.target.composing||(e.newTweet=t.target.value)}}})]),s("button",{staticClass:"btn tweet-button",attrs:{disabled:e.isProcessing},on:{click:e.addTweet}},[e._v(" "+e._s(e.isProcessing?"推文中...":"推文")+" ")])])])])])]):e._e()]),s("div",{staticClass:"bottom"},[s("button",{staticClass:"logout",on:{click:e.logout}},[e._m(1),s("div",{staticClass:"btn-logout"},[e._v("登出")])])])])},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal-header"},[s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("img",{attrs:{src:n("8459"),alt:""}})])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"icon"},[s("img",{attrs:{src:n("aaa9"),alt:""}})])}],r=n("1da1"),i=n("5530"),o=(n("96cf"),n("a9e3"),n("2708")),c=n("2f62"),u=n("6783"),l=n("2fa3"),d=n("1157"),f=n.n(d),m={mixins:[o["a"]],data:function(){return{newTweet:"",msgUnseenNum:0,notiUnseenNum:0,isShowModal:!1,isProcessing:!1,timelineNotice:{}}},computed:Object(i["a"])({},Object(c["b"])(["currentUser","isAuthenticated"])),watch:{newTweet:function(e){140===e.length&&l["a"].fire({icon:"warning",title:"字數限制140字"})}},created:function(){this.notiUnseenNum=localStorage.getItem("notiUnseenNum"),this.msgUnseenNum=localStorage.getItem("msgUnseenNum")},sockets:{connect:function(){console.log("連線成功")},disconnect:function(){console.log("斷開連線")},reconnect:function(){console.log("重新連線")},get_msg_notice:function(e){this.msgUnseenNum=e,localStorage.setItem("msgUnseenNum",e)},get_timeline_notice:function(e){this.notiUnseenNum=e,localStorage.setItem("notiUnseenNum",e)},update_timeline_notice:function(e){this.timelineNotice=e;var t=localStorage.getItem("notiUnseenNum");this.notiUnseenNum=Number(t)+1,localStorage.setItem("notiUnseenNum",this.notiUnseenNum)}},methods:{logout:function(){this.$store.commit("revokeAuthentication"),this.$router.push("/login")},addTweet:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.newTweet){t.next=4;break}return l["a"].fire({icon:"warning",title:"您的推文未填寫任何內容"}),t.abrupt("return");case 4:return e.isProcessing=!0,t.next=7,u["a"].createTweet({description:e.newTweet});case 7:if(n=t.sent,s=n.data,"error"!==s.status){t.next=11;break}throw new Error(s.message);case 11:e.$emit("after-submit-tweet",{description:e.newTweet}),f()("#newTweetModal").modal("hide"),e.postTimeline(s.Tweet.id),l["a"].fire({icon:"success",title:"新增推文成功"}),e.isProcessing=!1,e.newTweet="",t.next=23;break;case 19:t.prev=19,t.t0=t["catch"](0),console.log(t.t0.message),l["a"].fire({icon:"warning",title:"無法新增推文，請稍候在試"});case 23:case"end":return t.stop()}}),t,null,[[0,19]])})))()},showModal:function(){this.isShowModal=!0},cancelModal:function(){this.isShowModal=!1},postTimeline:function(e){var t=null,n=1;this.$socket.emit("post_timeline",{ReceiverId:t,type:n,PostId:e})}}},p=m,b=(n("fcd5"),n("2877")),g=Object(b["a"])(p,s,a,!1,null,"a2a02cd2",null);t["a"]=g.exports},6783:function(e,t,n){"use strict";n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("25f0"),n("a4d3"),n("e01a");var s=n("2fa3");t["a"]={getTweet:function(e){var t=e.tweetId;return s["b"].get("/tweets/".concat(t))},getTweetReplies:function(e){var t=e.tweetId;return s["b"].get("/tweets/".concat(t,"/replies"))},createTweetReply:function(e){var t=e.tweetId,n=e.comment;return s["b"].post("/tweets/".concat(t,"/replies"),{comment:n})},getTweets:function(e){var t=e.offset,n=e.limit,a=new URLSearchParams({offset:t,limit:n});return s["b"].get("/tweets?".concat(a.toString()))},createTweet:function(e){var t=e.description;return s["b"].post("/tweets",{description:t})},addLike:function(e){var t=e.tweetId;return s["b"].post("/tweets/".concat(t,"/like"),null)},deleteLike:function(e){var t=e.tweetId;return s["b"].post("/tweets/".concat(t,"/unlike"),null)}}},7696:function(e,t,n){"use strict";n("b0c0");var s=n("2fa3");t["a"]={logIn:function(e){var t=e.email,n=e.password;return s["b"].post("/users/login",{email:t,password:n})},regist:function(e){var t=e.account,n=e.name,a=e.email,r=e.password,i=e.checkPassword;return s["b"].post("/users",{account:t,name:n,email:a,password:r,checkPassword:i})}}},"7e75":function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",{staticClass:"tweet"},[s("router-link",{staticClass:"avatar",attrs:{to:{name:"user",params:{id:e.tweet.Author.id}}},on:{click:function(t){return t.stopPropagation(),e.linkToUserProfile.apply(null,arguments)}}},[s("img",{attrs:{src:e._f("emptyImage")(e.tweet.Author.avatar),alt:""}})]),s("div",{staticClass:"tweet-info"},[s("div",{staticClass:"user-info"},[s("router-link",{staticClass:"name",attrs:{to:{name:"user",params:{id:e.tweet.Author.id}}},on:{click:function(t){return t.stopPropagation(),e.linkToUserProfile.apply(null,arguments)}}},[e._v(" "+e._s(e.tweet.Author.name)+" ")]),s("span",{staticClass:"account"},[e._v("@"+e._s(e.tweet.Author.account))]),s("span",{staticClass:"tweet-update-at"},[e._v("・"+e._s(e._f("fromNow")(e.tweet.createdAt)))])],1),s("div",{staticClass:"tweet-content"},[e._v(" "+e._s(e.tweet.description)+" ")]),s("div",{staticClass:"tweet-panel"},[s("button",{staticClass:"tweet-reply-action",attrs:{type:"button","data-toggle":"modal","data-target":"#replyTweetModal-"+e.tweet.id},on:{click:e.handleReplyTweetModal}},[s("img",{attrs:{src:n("2765"),alt:""}}),s("span",[e._v(e._s(e.tweet.replyNum))])]),e.tweet.isLike?s("button",{staticClass:"likes",class:{"is-like":e.tweet.isLike},attrs:{type:"button",disabled:e.isProcessing},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.deleteLike(e.tweet.id)}}},[s("img",{attrs:{src:n("bea5"),alt:""}}),s("span",[e._v(e._s(e.tweet.likeNum))])]):s("button",{staticClass:"likes",attrs:{type:"button",disabled:e.isProcessing},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.addLike(e.tweet.id)}}},[s("img",{attrs:{src:n("ce3b"),alt:""}}),s("span",[e._v(e._s(e.tweet.likeNum))])])])]),e.isShowReplyModal?s("div",{staticClass:"modal fade",attrs:{id:"replyTweetModal-"+e.tweet.id,tabindex:"-1","aria-labelledby":"replyTweetModalLabel","aria-hidden":"true"}},[s("ReplyTweetModal",{attrs:{tweet:e.tweet},on:{"after-create-comment":e.afterCreateComment}})],1):e._e(),s("div",{staticClass:"full-link",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.linkToTweetDetail(e.tweet.id)}}})],1)},a=[],r=n("1da1"),i=n("5530"),o=(n("96cf"),n("2f62")),c=n("2708"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal-dialog"},[n("div",{staticClass:"modal-content"},[e._m(0),n("div",{staticClass:"modal-body"},[n("div",{staticClass:"tweet"},[n("a",{staticClass:"avatar",attrs:{href:""}},[n("img",{attrs:{src:e._f("emptyImage")(e.tweet.Author.avatar),alt:""}})]),n("div",{staticClass:"tweet-info"},[n("div",{staticClass:"user-info"},[n("a",{staticClass:"name",attrs:{href:""}},[e._v(e._s(e.tweet.Author.name))]),n("span",{staticClass:"account"},[e._v("@"+e._s(e.tweet.Author.account))]),n("span",{staticClass:"tweet-update-at"},[e._v("・"+e._s(e._f("fromNow")(e.tweet.createdAt)))])]),n("div",{staticClass:"tweet-content"},[e._v(" "+e._s(e.tweet.description)+" ")]),n("div",{staticClass:"tweet-reply-to"},[e._v("回覆給"),n("span",[e._v("@"+e._s(e.tweet.Author.account))])])])]),n("form",{staticClass:"reply-tweet",on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit(e.tweet)}}},[n("div",{staticClass:"reply-tweet-wrap"},[n("span",{staticClass:"avatar",attrs:{href:""}},[n("img",{attrs:{src:e._f("emptyImage")(e.currentUser.avatar),alt:""}})]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comment,expression:"comment"}],staticClass:"reply-textarea",attrs:{name:"comment",id:"",cols:"30",rows:"5",maxlength:"140",placeholder:"推你的回覆"},domProps:{value:e.comment},on:{input:function(t){t.target.composing||(e.comment=t.target.value)}}})]),n("button",{staticClass:"btn reply-button"},[e._v("回覆")])])])])])},l=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal-header"},[s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("img",{attrs:{src:n("8459"),alt:""}})])])}],d=(n("498a"),n("6783")),f=n("2fa3"),m=n("1157"),p=n.n(m),b={mixins:[c["c"],c["a"]],props:{tweet:{type:Object,required:!0}},computed:Object(i["a"])({},Object(o["b"])(["currentUser"])),data:function(){return{comment:""}},methods:{handleSubmit:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,t.comment.trim()){n.next=4;break}return f["a"].fire({icon:"warning",title:"您的回覆未填寫任何內容"}),n.abrupt("return");case 4:return t.isProcessing=!0,n.next=7,d["a"].createTweetReply({tweetId:t.tweet.id,comment:t.comment});case 7:if(s=n.sent,a=s.data,"error"!==a.status){n.next=11;break}throw new Error(a.message);case 11:t.$emit("after-create-comment",{tweetId:e.id,authorId:e.Author.id,replyId:a.Reply.id,replyNum:e.replyNum}),p()("#replyTweetModal-".concat(e.id)).modal("hide"),f["a"].fire({icon:"success",title:"回覆推文成功"}),t.isProcessing=!1,t.comment="",n.next=22;break;case 18:n.prev=18,n.t0=n["catch"](0),console.error(n.t0.response),f["a"].fire({icon:"warning",title:"無法新增回覆，請稍候在試"});case 22:case"end":return n.stop()}}),n,null,[[0,18]])})))()}}},g=b,w=(n("c2cc"),n("2877")),h=Object(w["a"])(g,u,l,!1,null,"3ba3dca4",null),v=h.exports,k={name:"TweetsList",mixins:[c["c"],c["a"]],components:{ReplyTweetModal:v},props:{initinalTweet:{type:Object,required:!0}},data:function(){return{tweet:this.initinalTweet,isShowReplyModal:!1,isProcessing:!1}},computed:Object(i["a"])({},Object(o["b"])(["currentUser"])),methods:{addLike:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.isProcessing=!0,n.next=4,d["a"].addLike({tweetId:e});case 4:if(s=n.sent,a=s.data,"success"===a.status){n.next=8;break}throw new Error(a.message);case 8:t.tweet.isLike=!0,t.tweet.likeNum+=1,t.currentUser.id!==t.tweet.Author.id&&t.postTimeline(t.tweet.Author.id,3,a.Like.id),f["a"].fire({icon:"success",title:"加入喜歡！"}),t.isProcessing=!1,n.next=20;break;case 15:n.prev=15,n.t0=n["catch"](0),console.log(n.t0),f["a"].fire({icon:"error",title:"無法加入喜歡，請稍後再試"}),t.isProcessing=!1;case 20:case"end":return n.stop()}}),n,null,[[0,15]])})))()},deleteLike:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.isProcessing=!0,n.next=4,d["a"].deleteLike({tweetId:e});case 4:if(s=n.sent,a=s.data,"success"===a.status){n.next=8;break}throw new Error(a.message);case 8:t.tweet.isLike=!1,t.tweet.likeNum-=1,f["a"].fire({icon:"success",title:"收回喜歡！"}),t.isProcessing=!1,n.next=19;break;case 14:n.prev=14,n.t0=n["catch"](0),console.log(n.t0),f["a"].fire({icon:"error",title:"無法收回喜歡，請稍後再試"}),t.isProcessing=!1;case 19:case"end":return n.stop()}}),n,null,[[0,14]])})))()},handleReplyTweetModal:function(){this.isShowReplyModal=!0},linkToTweetDetail:function(e){this.$router.push("/tweets/".concat(e))},afterCreateComment:function(e){var t=e.authorId,n=e.replyId;this.tweet.replyNum+=1,this.currentUser.id!==t&&this.postTimeline(t,2,n)},postTimeline:function(e,t,n){this.$socket.emit("post_timeline",{ReceiverId:e,type:t,PostId:n})}}},j=k,_=(n("3fa2"),Object(w["a"])(j,s,a,!1,null,"5add847c",null));t["a"]=_.exports},8210:function(e,t,n){},8459:function(e,t,n){e.exports=n.p+"img/icon_close-og.b7a5aa40.svg"},"85ec":function(e,t,n){},"873c":function(e,t,n){},"94f1":function(e,t,n){"use strict";n("25b3")},"9a6e":function(e,t,n){"use strict";n("8210")},"9b19":function(e,t,n){e.exports=n.p+"img/logo.afc48684.svg"},aaa9:function(e,t,n){e.exports=n.p+"img/icon_logout.a25ab39c.svg"},afd9:function(e,t,n){},b56c:function(e,t,n){"use strict";n("afd9")},be6c:function(e,t,n){"use strict";n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("25f0");var s=n("2fa3");t["a"]={adminLogin:function(e){var t=e.email,n=e.password;return s["b"].post("/admin/login",{email:t,password:n})},getAdminTweets:function(e){var t=e.limit,n=e.offset,a=new URLSearchParams({limit:t,offset:n});return s["b"].get("/admin/tweets?".concat(a.toString()))},deleteAdminTweets:function(e){var t=e.id;return s["b"].delete("/admin/tweets/".concat(t))},getAdminUsers:function(e){var t=e.limit,n=e.offset,a=new URLSearchParams({limit:t,offset:n});return s["b"].get("/admin/users?".concat(a.toString()))}}},bea5:function(e,t,n){e.exports=n.p+"img/icon_like-fill.12d69306.svg"},c035:function(e,t,n){e.exports=n.p+"img/icon_mail.a1b8ca10.svg"},c2cc:function(e,t,n){"use strict";n("1094")},ce3b:function(e,t,n){e.exports=n.p+"img/icon_like.47491b07.svg"},d380:function(e,t,n){},d6b9:function(e,t,n){e.exports=n.p+"img/icon_chat.b15ff1ad.svg"},e37f:function(e,t,n){},e740:function(e,t,n){e.exports=n.p+"img/icon_index.cc8c49ce.svg"},ebe7:function(e,t,n){},fcd5:function(e,t,n){"use strict";n("873c")},fcfb:function(e,t,n){e.exports=n.p+"img/icon_ring.6ed7f9f0.svg"}});
//# sourceMappingURL=app.7da030ac.js.map