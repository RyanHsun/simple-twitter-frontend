(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3010eec0"],{"056a":function(t,i,s){"use strict";s("a5e6")},"109a":function(t,i,s){"use strict";s.r(i);var a=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"container"},[s("Sidebar"),s("section",{staticClass:"notification"},[s("div",{staticClass:"notification-wrap"},[t._m(0),s("NotificationList")],1)]),s("UsersTop")],1)},e=[function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("h2",{staticClass:"headbar"},[s("div",{staticClass:"title"},[s("div",{staticClass:"main-title"},[t._v("通知")])])])}],n=s("2708"),r=s("5ea5"),c=s("3e72"),o=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",[t.isLoading?a("Spinner"):t._e(),t.notificationNewest.length>0?a("ul",{staticClass:"notification notification-newest"},[a("li",{staticClass:"notice head"},[t._v("新通知")]),t._l(t.notificationNewest,(function(i){return a("li",{key:i.id,staticClass:"notice"},[i.Subscribing?[a("router-link",{staticClass:"avatar",attrs:{to:{name:"user",params:{id:i.Subscribing.User.id}}}},[a("img",{attrs:{src:i.Subscribing.User.avatar,alt:""}})]),a("div",{staticClass:"notice-info"},[a("div",{staticClass:"user-info"},[a("router-link",{staticClass:"name",attrs:{to:{name:"user",params:{id:i.Subscribing.User.id}}}},[t._v(" "+t._s(i.Subscribing.User.name)+" ")]),t._v(" 有新的推文通知 ")],1),a("span",{staticClass:"notice-created-at"},[i.isRead?a("img",{class:{isread:i.isRead},attrs:{src:s("c2fe"),width:"12px",alt:""}}):t._e(),t._v(" "+t._s(t._f("fromNow")(i.Subscribing.Tweet.createdAt))+" ")]),a("div",{staticClass:"notice-content"},[t._v(" "+t._s(i.Subscribing.Tweet.description)+" ")])]),a("div",{staticClass:"full-link",on:{click:function(s){return t.readNotification("tweet",i.id,i.Subscribing.Tweet.id)}}})]:i.Like?[a("router-link",{staticClass:"avatar",attrs:{to:{name:"user",params:{id:i.Like.User.id}}}},[a("img",{attrs:{src:i.Like.User.avatar,alt:""}})]),a("div",{staticClass:"notice-info"},[a("div",{staticClass:"user-info"},[a("router-link",{staticClass:"name",attrs:{to:{name:"user",params:{id:i.Like.User.id}}}},[t._v(" "+t._s(i.Like.User.name)+" ")]),t._v(" 喜歡你的推文 ")],1),a("span",{staticClass:"notice-created-at"},[i.isRead?a("img",{class:{isread:i.isRead},attrs:{src:s("c2fe"),width:"12px",alt:""}}):t._e(),t._v(" "+t._s(t._f("fromNow")(i.Like.createdAt))+" ")])]),a("div",{staticClass:"full-link",on:{click:function(s){return t.readNotification("tweet",i.id,i.Like.LikedTweet.id)}}})]:i.Reply?[a("router-link",{staticClass:"avatar",attrs:{to:{name:"user",params:{id:i.Reply.User.id}}}},[a("img",{attrs:{src:i.Reply.User.avatar,alt:""}})]),a("div",{staticClass:"notice-info"},[a("div",{staticClass:"user-info"},[a("router-link",{staticClass:"name",attrs:{to:{name:"user",params:{id:i.Reply.User.id}}}},[t._v(" "+t._s(i.Reply.User.name)+" ")]),t._v(" 回覆你的推文 ")],1),a("span",{staticClass:"notice-created-at"},[i.isRead?a("img",{class:{isread:i.isRead},attrs:{src:s("c2fe"),width:"12px",alt:""}}):t._e(),t._v(" "+t._s(t._f("fromNow")(i.Reply.createdAt))+" ")]),a("div",{staticClass:"notice-content"},[t._v(" "+t._s(i.Reply.comment)+" ")])]),a("div",{staticClass:"full-link",on:{click:function(s){return t.readNotification("tweet",i.id,i.Reply.RepliedTweet.id)}}})]:i.Follower?[a("router-link",{staticClass:"avatar",attrs:{to:{name:"user",params:{id:i.Follower.id}}}},[a("img",{attrs:{src:i.Follower.avatar,alt:""}})]),a("div",{staticClass:"notice-info"},[a("div",{staticClass:"user-info"},[a("router-link",{staticClass:"name",attrs:{to:{name:"user",params:{id:i.Follower.id}}}},[t._v(" "+t._s(i.Follower.name)+" ")]),t._v(" 開始跟隨你 ")],1),a("span",{staticClass:"notice-created-at"},[i.isRead?a("img",{class:{isread:i.isRead},attrs:{src:s("c2fe"),width:"12px",alt:""}}):t._e(),t._v(" "+t._s(t._f("fromNow")(i.createdAt))+" ")])]),a("div",{staticClass:"full-link",on:{click:function(s){return t.readNotification("user",i.id,i.Follower.id)}}})]:t._e()],2)}))],2):t._e(),t.notificationList.length>0?a("ul",{staticClass:"notification notification-list"},[a("li",{staticClass:"notice head"},[t._v("過去的通知")]),t._l(t.notificationList,(function(i){return a("li",{key:i.id,staticClass:"notice"},[i.Subscribing?[a("router-link",{staticClass:"avatar",attrs:{to:{name:"user",params:{id:i.Subscribing.User.id}}}},[a("img",{attrs:{src:i.Subscribing.User.avatar,alt:""}})]),a("div",{staticClass:"notice-info"},[a("div",{staticClass:"user-info"},[a("router-link",{staticClass:"name",attrs:{to:{name:"user",params:{id:i.Subscribing.User.id}}}},[t._v(" "+t._s(i.Subscribing.User.name)+" ")]),t._v(" 有新的推文通知 ")],1),a("span",{staticClass:"notice-created-at"},[i.isRead?a("img",{class:{isread:i.isRead},attrs:{src:s("c2fe"),width:"12px",alt:""}}):t._e(),t._v(" "+t._s(t._f("fromNow")(i.Subscribing.Tweet.createdAt))+" ")]),a("div",{staticClass:"notice-content"},[t._v(" "+t._s(i.Subscribing.Tweet.description)+" ")])]),a("div",{staticClass:"full-link",class:{unread:!i.isRead},on:{click:function(s){return t.readNotification("tweet",i.id,i.Subscribing.Tweet.id)}}})]:i.Like?[a("router-link",{staticClass:"avatar",attrs:{to:{name:"user",params:{id:i.Like.User.id}}}},[a("img",{attrs:{src:i.Like.User.avatar,alt:""}})]),a("div",{staticClass:"notice-info"},[a("div",{staticClass:"user-info"},[a("router-link",{staticClass:"name",attrs:{to:{name:"user",params:{id:i.Like.User.id}}}},[t._v(" "+t._s(i.Like.User.name)+" ")]),t._v(" 喜歡你的推文 ")],1),a("span",{staticClass:"notice-created-at"},[i.isRead?a("img",{class:{isread:i.isRead},attrs:{src:s("c2fe"),width:"12px",alt:""}}):t._e(),t._v(" "+t._s(t._f("fromNow")(i.Like.createdAt))+" ")])]),a("div",{staticClass:"full-link",class:{unread:!i.isRead},on:{click:function(s){return t.readNotification("tweet",i.id,i.Like.LikedTweet.id)}}})]:i.Reply?[a("router-link",{staticClass:"avatar",attrs:{to:{name:"user",params:{id:i.Reply.User.id}}}},[a("img",{attrs:{src:i.Reply.User.avatar,alt:""}})]),a("div",{staticClass:"notice-info"},[a("div",{staticClass:"user-info"},[a("router-link",{staticClass:"name",attrs:{to:{name:"user",params:{id:i.Reply.User.id}}}},[t._v(" "+t._s(i.Reply.User.name)+" ")]),t._v(" 回覆你的推文 ")],1),a("span",{staticClass:"notice-created-at"},[i.isRead?a("img",{class:{isread:i.isRead},attrs:{src:s("c2fe"),width:"12px",alt:""}}):t._e(),t._v(" "+t._s(t._f("fromNow")(i.Reply.createdAt))+" ")]),a("div",{staticClass:"notice-content"},[t._v(" "+t._s(i.Reply.comment)+" ")])]),a("div",{staticClass:"full-link",class:{unread:!i.isRead},on:{click:function(s){return t.readNotification("tweet",i.id,i.Reply.RepliedTweet.id)}}})]:i.Follower?[a("router-link",{staticClass:"avatar",attrs:{to:{name:"user",params:{id:i.Follower.id}}}},[a("img",{attrs:{src:i.Follower.avatar,alt:""}})]),a("div",{staticClass:"notice-info"},[a("div",{staticClass:"user-info"},[a("router-link",{staticClass:"name",attrs:{to:{name:"user",params:{id:i.Follower.id}}}},[t._v(" "+t._s(i.Follower.name)+" ")]),t._v(" 開始跟隨你 ")],1),a("span",{staticClass:"notice-created-at"},[i.isRead?a("img",{class:{isread:i.isRead},attrs:{src:s("c2fe"),width:"12px",alt:""}}):t._e(),t._v(" "+t._s(t._f("fromNow")(i.createdAt))+" ")])]),a("div",{staticClass:"full-link",class:{unread:!i.isRead},on:{click:function(s){return t.readNotification("user",i.id,i.Follower.id)}}})]:t._e()],2)}))],2):t._e()],1)},l=[],d=s("2375"),u={name:"NotificationList",mixins:[n["c"],n["a"]],components:{Spinner:d["a"]},data:function(){return{notificationList:[],notificationNewest:[],isLoading:!0}},created:function(){var t=new Date;this.join_timeline_page(t),this.get_timeline_notice_details()},sockets:{update_timeline_notice_detail:function(t){this.notificationNewest.unshift(t)}},methods:{join_timeline_page:function(t){this.$socket.emit("join_timeline_page",{timestamp:t}),localStorage.removeItem("notiUnseenNum")},leave_timeline_page:function(){this.$socket.emit("leave_timeline_page")},get_timeline_notice_details:function(){var t=this;this.$socket.emit("get_timeline_notice_details",{offset:0,limit:20},(function(i){t.notificationList=i.Seen,t.notificationNewest=i.Unseen,t.isLoading=!1}))},readNotification:function(t,i,s){this.$socket.emit("read_timeline",{timelineId:i}),this.$router.push({name:t,params:{id:s}})}},beforeDestroy:function(){this.leave_timeline_page()}},f=u,m=(s("800a"),s("2877")),_=Object(m["a"])(f,o,l,!1,null,"324a33ab",null),v=_.exports,p={mixins:[n["a"]],name:"Notification",components:{Sidebar:r["a"],NotificationList:v,UsersTop:c["a"]}},C=p,k=(s("056a"),Object(m["a"])(C,a,e,!1,null,"8422db1c",null));i["default"]=k.exports},"800a":function(t,i,s){"use strict";s("c5dd")},a5e6:function(t,i,s){},c2fe:function(t,i,s){t.exports=s.p+"img/icon_read.c0cbd084.svg"},c5dd:function(t,i,s){}}]);
//# sourceMappingURL=chunk-3010eec0.30a36ad9.js.map