(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76ee6dff"],{"02b1":function(e,t,r){},"2f50":function(e,t,r){"use strict";r("02b1")},"369c":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("Sidebar"),r("section",{staticClass:"user-followships"},[r("div",{staticClass:"user-wrap"},[r("div",{staticClass:"headbar-wrap"},[r("Headbar",{attrs:{"initial-user":e.user}}),r("div",{staticClass:"user-followships-tab"},[r("div",{staticClass:"user-followships-followers active"},[r("router-link",{staticClass:"nav-item",attrs:{to:{name:"user-followers",params:{id:e.user.id}}}},[e._v("跟隨者")])],1),r("div",{staticClass:"user-followships-followings"},[r("router-link",{staticClass:"nav-item",attrs:{to:{name:"user-followings",params:{id:e.user.id}}}},[e._v("正在跟隨")])],1)])],1),e._l(e.followerUsers,(function(e){return r("UserFollowersCard",{key:e.id,attrs:{initinalFollowerUser:e}})}))],2)]),r("UsersTop")],1)},o=[],i=r("5530"),a=r("1da1"),n=(r("96cf"),r("b0c0"),r("6d67")),l=r("5ea5"),c=r("3e72"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"followships-list"},[r("li",{staticClass:"followships-item"},[r("router-link",{staticClass:"followships-avatar avatar",attrs:{to:{name:"user",params:{id:e.followerUser.followerId}}}},[r("img",{attrs:{src:e._f("emptyImage")(e.followerUser.follower.avatar),alt:""}})]),r("div",{staticClass:"followships-content"},[r("router-link",{staticClass:"followships-info",attrs:{to:{name:"user",params:{id:e.followerUser.followerId}}}},[r("span",{staticClass:"name"},[e._v(e._s(e.followerUser.follower.name))]),r("span",{staticClass:"account"},[e._v("@"+e._s(e.followerUser.follower.account))])]),e.followerUser.follower.isFollowing?r("button",{staticClass:"btn toggle-follow is-following",attrs:{disabled:e.isProcessing},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.deleteFollowing(e.followerUser.followerId)}}},[e._v(" 正在跟隨 ")]):r("button",{staticClass:"btn toggle-follow",attrs:{disabled:e.isProcessing},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.addFollowing.apply(null,arguments)}}},[e._v(" 跟隨 ")]),r("div",{staticClass:"followships-intro"},[e._v(" "+e._s(e.followerUser.follower.introduction)+" ")])],1),r("div",{staticClass:"full-link",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.linkToUserProfile(e.followerUser.followerId)}}})],1)])},f=[],w=r("2f62"),d=r("2708"),p=r("4cce"),m=r("2fa3"),v={mixins:[d["a"]],props:{initinalFollowerUser:{type:Object,require:!0}},data:function(){return{followerUser:this.initinalFollowerUser,isProcessing:!1}},computed:Object(i["a"])({},Object(w["b"])(["currentUser"])),methods:{deleteFollowing:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isProcessing=!0,r.next=4,p["a"].deleteFollowing({userId:e});case 4:if(s=r.sent,o=s.data,"success"===o.status){r.next=8;break}throw new Error(o.message);case 8:t.followerUser.follower.isFollowing=!1,m["a"].fire({icon:"success",title:"取消跟隨"}),t.isProcessing=!1,r.next=18;break;case 13:r.prev=13,r.t0=r["catch"](0),t.isProcessing=!1,m["a"].fire({icon:"error",title:"無法取消跟隨，請稍後再試"}),console.log("error",r.t0);case 18:case"end":return r.stop()}}),r,null,[[0,13]])})))()},addFollowing:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isProcessing=!0,t.next=4,p["a"].addFollowing({id:e.followerUser.followerId});case 4:if(r=t.sent,s=r.data,"success"===s.status){t.next=8;break}throw new Error(s.message);case 8:e.followerUser.follower.isFollowing=!0,e.postTimeline(e.followerUser.followerId,4,e.currentUser.id),m["a"].fire({icon:"success",title:"跟隨成功"}),e.isProcessing=!1,t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](0),e.isProcessing=!1,m["a"].fire({icon:"error",title:"無法跟隨，請稍後再試"});case 18:case"end":return t.stop()}}),t,null,[[0,14]])})))()},linkToUserProfile:function(e){this.$router.push("/users/".concat(e))},postTimeline:function(e,t,r){this.$socket.emit("post_timeline",{ReceiverId:e,type:t,PostId:r})}}},g=v,h=(r("89bb"),r("2877")),b=Object(h["a"])(g,u,f,!1,null,"bec1c756",null),U=b.exports,k={components:{Headbar:n["a"],Sidebar:l["a"],UsersTop:c["a"],UserFollowersCard:U},data:function(){return{user:{id:-1,account:"",name:"",email:"",introduction:"",avatar:"",cover:"",tweetNum:-1,likeNum:-1,followingNum:-1,followerNum:-1,lastLoginAt:-1,isFollowing:!1},followerUsers:[]}},created:function(){var e=this.$route.params.id;this.fetchUser(e),this.fetchFollowerusers(e)},methods:{fetchUser:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var s,o,i,a,n,l,c,u,f,w,d,v,g,h,b;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,p["a"].getUser({userId:e});case 3:s=r.sent,o=s.data,i=o.id,a=o.account,n=o.name,l=o.email,c=o.introduction,u=o.avatar,f=o.cover,w=o.tweetNum,d=o.likeNum,v=o.followingNum,g=o.followerNum,h=o.lastLoginAt,b=o.isFollowing,t.user={id:i,account:a,name:n,email:l,introduction:c,avatar:u,cover:f,tweetNum:w,likeNum:d,followingNum:v,followerNum:g,lastLoginAt:h,isFollowing:b},r.next=13;break;case 9:r.prev=9,r.t0=r["catch"](0),console.log(r.t0),m["a"].fire({icon:"error",title:"無法取得使用者資料，請稍後再試"});case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))()},fetchFollowerusers:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,p["a"].getFollowers({userId:e,offset:0,limit:100});case 3:s=r.sent,t.followerUsers=Object(i["a"])({},s.data),r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),m["a"].fire({icon:"warning",title:"無法取得跟隨清單，請稍後再試"});case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()}}},C=k,_=(r("8820"),Object(h["a"])(C,s,o,!1,null,"02598d95",null));t["default"]=_.exports},"6d67":function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("h2",{staticClass:"headbar"},[s("button",{staticClass:"back",on:{click:function(t){return e.$router.back()}}},[s("img",{attrs:{src:r("8480"),alt:""}})]),s("router-link",{directives:[{name:"show",rawName:"v-show",value:e.user.name,expression:"user.name"}],staticClass:"title",attrs:{to:{name:"user",params:{id:e.user.id}}}},[s("div",{staticClass:"main-title"},[e._v(e._s(e.user.name))]),s("div",{staticClass:"sub-title"},[e._v(e._s(e.user.tweetNum)+" 推文")])])],1)},o=[],i=r("5530"),a={props:{initialUser:{type:Object,required:!0}},data:function(){return{user:this.initialUser}},watch:{initialUser:function(e){this.user=Object(i["a"])(Object(i["a"])({},this.user),e)}}},n=a,l=(r("2f50"),r("2877")),c=Object(l["a"])(n,s,o,!1,null,"1184a62f",null);t["a"]=c.exports},8480:function(e,t,r){e.exports=r.p+"img/icon_back.59e5a2e5.svg"},8820:function(e,t,r){"use strict";r("8b59")},"89bb":function(e,t,r){"use strict";r("af79")},"8b59":function(e,t,r){},af79:function(e,t,r){}}]);
//# sourceMappingURL=chunk-76ee6dff.b60b29f1.js.map