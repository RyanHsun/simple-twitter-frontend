(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f12e0a62"],{"048a":function(t,e,s){},"05f2":function(t,e,s){"use strict";s("048a")},"0d61":function(t,e,s){"use strict";s("1930")},1930:function(t,e,s){},"3bb6":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"sidebar"},[a("div",{staticClass:"top"},[t._m(0),a("nav",{staticClass:"navigation"},[a("router-link",{staticClass:"nav-item",attrs:{to:"/admin/tweets"}},[a("div",{staticClass:"icon index"},[a("img",{attrs:{src:s("e740"),alt:""}})]),a("div",[t._v("推文清單")])]),a("router-link",{staticClass:"nav-item",attrs:{to:"/admin/users"}},[a("div",{staticClass:"icon user"},[a("img",{attrs:{src:s("0881"),alt:""}})]),a("div",[t._v("使用者列表")])])],1)]),a("div",{staticClass:"bottom"},[a("button",{staticClass:"logout",on:{click:t.logout}},[t._m(1),a("div",{staticClass:"btn-logout"},[t._v("登出")])])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",{staticClass:"logo"},[a("a",{attrs:{href:"#"}},[a("img",{attrs:{src:s("1ae4"),alt:""}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"icon"},[a("img",{attrs:{src:s("aaa9"),alt:""}})])}],n=s("5530"),r=s("2f62"),c={computed:Object(n["a"])({},Object(r["b"])(["currentUser","isAuthenticated"])),methods:{logout:function(){this.$store.commit("revokeAuthentication"),this.$router.push("/login")}}},o=c,u=(s("05f2"),s("2877")),l=Object(u["a"])(o,a,i,!1,null,"05ffe716",null);e["a"]=l.exports},"79aa":function(t,e,s){"use strict";s("d412")},d412:function(t,e,s){},d820:function(t,e,s){t.exports=s.p+"img/icon_close.33b03ef3.svg"},fa6a:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("AdminSidebar"),s("section",{staticClass:"admin-tweets"},[t._m(0),s("div",{staticClass:"admin-tweets-wrap"},[s("AdminTweetsList")],1)])],1)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",{staticClass:"headbar"},[s("div",{staticClass:"main-title"},[t._v("推文清單")])])}],n=s("3bb6"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"tweets-list"},t._l(t.tweets,(function(e){return a("li",{key:e.id,staticClass:"tweet",attrs:{to:{name:"tweet",params:{id:e.id}}}},[a("a",{staticClass:"avatar",attrs:{href:""}},[a("img",{attrs:{src:t._f("emptyImage")(e.Author.avatar),alt:""}})]),a("div",{staticClass:"tweet-info"},[a("div",{staticClass:"user-info"},[a("a",{staticClass:"name",attrs:{href:""}},[t._v(t._s(e.Author.name))]),a("span",{staticClass:"account"},[t._v("@"+t._s(e.Author.account))]),a("span",{staticClass:"tweet-update-at"},[t._v("・"+t._s(t._f("fromNow")(e.createdAt)))])]),a("div",{staticClass:"tweet-content"},[t._v(" "+t._s(e.description)+" ")])]),a("button",{staticClass:"delete-tweet",attrs:{type:"button"},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.deleteTweet(e.id)}}},[a("img",{attrs:{src:s("d820"),alt:""}})])])})),0)},c=[],o=s("5530"),u=s("1da1"),l=(s("96cf"),s("2708")),f=s("be6c"),d=s("2fa3"),m={mixins:[l["c"],l["a"]],data:function(){return{tweets:{}}},created:function(){var t=this.$route.query,e=t.limit,s=void 0===e?200:e,a=t.offset,i=void 0===a?0:a;this.fetchTweets({queryLimit:s,queryOffset:i})},beforeRouteUpdate:function(t,e,s){var a=t.query,i=a.limit,n=void 0===i?"":i,r=a.offset,c=void 0===r?"":r;this.fetchTweets({queryLimit:n,queryOffset:c}),s()},methods:{fetchTweets:function(t){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function s(){var a,i,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=t.queryLimit,i=t.queryOffset,s.prev=1,s.next=4,f["a"].getAdminTweets({limit:a,offset:i});case 4:n=s.sent,e.tweets=Object(o["a"])({},n.data),s.next=11;break;case 8:s.prev=8,s.t0=s["catch"](1),d["a"].fire({icon:"warning",title:"無法取得後台推文清單，請稍後再試"});case 11:case"end":return s.stop()}}),s,null,[[1,8]])})))()},deleteTweet:function(t){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function s(){var a,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,f["a"].deleteAdminTweets({id:t});case 3:if(a=s.sent,i=a.data,"success"===i.status){s.next=7;break}throw new Error(i.message);case 7:console.log("handleDeleteButtonClick",t),d["a"].fire({icon:"success",title:"移除推文成功"}),e.fetchTweets({queryLimit:200,queryOffset:0}),s.next=15;break;case 12:s.prev=12,s.t0=s["catch"](0),d["a"].fire({icon:"warning",title:"無法刪除後台推文清單，請稍後再試"});case 15:case"end":return s.stop()}}),s,null,[[0,12]])})))()}}},v=m,h=(s("0d61"),s("2877")),w=Object(h["a"])(v,r,c,!1,null,"53005551",null),p=w.exports,_={components:{AdminSidebar:n["a"],AdminTweetsList:p}},b=_,C=(s("79aa"),Object(h["a"])(b,a,i,!1,null,"78e6860c",null));e["default"]=C.exports}}]);
//# sourceMappingURL=chunk-f12e0a62.c74d7093.js.map