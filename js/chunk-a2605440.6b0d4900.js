(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a2605440"],{"38d7":function(e,a,t){},"99c1":function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"container"},[t("Sidebar"),t("section",{staticClass:"account-setting"},[e._m(0),t("form",{on:{submit:function(a){return a.stopPropagation(),a.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[t("div",{staticClass:"form-label-group mb-2"},[t("label",{staticClass:"input-label",attrs:{for:"account"}},[e._v("帳號")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.account,expression:"account"}],staticClass:"form-control",attrs:{id:"account",name:"account",type:"text",placeholder:"",autocomplete:"username",required:"",autofocus:""},domProps:{value:e.account},on:{input:function(a){a.target.composing||(e.account=a.target.value)}}})]),t("div",{staticClass:"form-label-group mb-2"},[t("label",{staticClass:"input-label",attrs:{for:"name"}},[e._v("名稱")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control",attrs:{id:"name",name:"name",type:"text",placeholder:"",autocomplete:"username",required:"",autofocus:""},domProps:{value:e.name},on:{input:function(a){a.target.composing||(e.name=a.target.value)}}})]),t("div",{staticClass:"form-label-group mb-2"},[t("label",{staticClass:"input-label",attrs:{for:"email"}},[e._v("Email")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{id:"email",name:"email",type:"email",placeholder:"",autocomplete:"username",required:"",autofocus:""},domProps:{value:e.email},on:{input:function(a){a.target.composing||(e.email=a.target.value)}}})]),t("div",{staticClass:"form-label-group mb-3"},[t("label",{staticClass:"input-label",attrs:{for:"password"}},[e._v("舊密碼")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{id:"password",name:"password",type:"password",placeholder:"",autocomplete:"current-password",required:""},domProps:{value:e.password},on:{input:function(a){a.target.composing||(e.password=a.target.value)}}})]),t("div",{staticClass:"form-label-group mb-3"},[t("label",{staticClass:"input-label",attrs:{for:"passwordNew"}},[e._v("新密碼")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.passwordNew,expression:"passwordNew"}],staticClass:"form-control",attrs:{id:"passwordNew",name:"passwordNew",type:"password",placeholder:"",autocomplete:"current-password",required:""},domProps:{value:e.passwordNew},on:{input:function(a){a.target.composing||(e.passwordNew=a.target.value)}}})]),t("div",{staticClass:"form-label-group mb-3"},[t("label",{staticClass:"input-label",attrs:{for:"passwordNewCheck"}},[e._v("新密碼確認")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.passwordNewCheck,expression:"passwordNewCheck"}],staticClass:"form-control",attrs:{id:"passwordNewCheck",name:"passwordNewCheck",type:"password",placeholder:"",autocomplete:"current-password",required:""},domProps:{value:e.passwordNewCheck},on:{input:function(a){a.target.composing||(e.passwordNewCheck=a.target.value)}}})]),t("button",{staticClass:"save-btn btn",attrs:{type:"submit",disabled:e.isProcessing}},[e._v(" "+e._s(e.isProcessing?"資料更新中...":"儲存")+" ")])])])],1)},r=[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("h2",{staticClass:"headbar"},[t("div",{staticClass:"main-title"},[e._v("帳戶設定")])])}],o=t("1da1"),i=t("5530"),n=(t("96cf"),t("b0c0"),t("d3b7"),t("25f0"),t("2f62")),c=t("5ea5"),l=t("4cce"),u=t("2fa3"),p={components:{Sidebar:c["a"]},data:function(){return{id:-1,account:"",name:"",email:"",password:"",passwordNew:"",passwordNewCheck:"",isProcessing:!1}},computed:Object(i["a"])({},Object(n["b"])(["currentUser"])),watch:{currentUser:function(e){if(-1!==e.id){var a=this.$route.params.id;this.setUser(a)}}},created:function(){if(-1!==this.currentUser.id){var e=this.$route.params.id;this.setUser(e)}},beforeRouteUpdate:function(e,a,t){if(-1!==this.currentUser.id){var s=e.params.id;this.setUser(s),t()}},methods:{setUser:function(e){var a=this.currentUser,t=a.id,s=a.account,r=a.name,o=a.email,i=a.password,n=a.passwordNew,c=a.passwordNewCheck;t.toString()===e.toString()?(this.id=t,this.account=s,this.name=r,this.email=o,this.password=i,this.passwordNew=n,this.passwordNewCheck=c):this.$router.push({name:"not-found"})},handleSubmit:function(e){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var s,r,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,a.account&&a.name&&a.email&&a.password&&a.passwordNew&&a.passwordNewCheck){t.next=4;break}return u["a"].fire({icon:"warning",title:"請確認已填寫所有欄位"}),t.abrupt("return");case 4:if(a.passwordNew===a.passwordNewCheck){t.next=8;break}return u["a"].fire({icon:"warning",title:"兩次輸入的密碼不同"}),a.passwordNewCheck="",t.abrupt("return");case 8:return s=e.target,r=new FormData(s),a.isProcessing=!0,t.next=13,l["a"].updateUser({userId:a.id,formData:r});case 13:if(o=t.sent,i=o.data,"error"!==i.status){t.next=17;break}throw new Error(i.message);case 17:u["a"].fire({icon:"success",title:"資料更新成功"}),a.isProcessing=!1,a.$router.push({name:"user",params:{id:a.id}}),t.next=27;break;case 22:t.prev=22,t.t0=t["catch"](0),console.error(t.t0.message),a.isProcessing=!1,u["a"].fire({icon:"error",title:"無法更新使用者資料，請稍後再試"});case 27:case"end":return t.stop()}}),t,null,[[0,22]])})))()}}},d=p,m=(t("e723"),t("2877")),w=Object(m["a"])(d,s,r,!1,null,"37e12794",null);a["default"]=w.exports},e723:function(e,a,t){"use strict";t("38d7")}}]);
//# sourceMappingURL=chunk-a2605440.6b0d4900.js.map